(this["webpackJsonparound-react"]=this["webpackJsonparound-react"]||[]).push([[0],{15:function(e,t,n){},16:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n(1),o=n.n(r),c=n(6),s=n.n(c),i=(n(15),n(9)),u=n(2),l=n.p+"static/media/logo.c7581985.svg";var p=function(){return Object(a.jsx)("header",{className:"header",children:Object(a.jsx)("img",{src:l,alt:"Around the US",className:"logo"})})},d=Object(r.createContext)();var j=function(e){var t=e.card,n=e.onCardDelete,o=e.onCardClick,c=e.onCardLike,s=Object(r.useContext)(d),i=t.owner._id===s._id,u="elements__trash ".concat(i?"elements__trash_visible":"elements__trash"),l=t.likes.some((function(e){return e._id===s._id})),p="elements__favorite ".concat(l?"elements__favorite_selected":"elements__favorite");return Object(a.jsxs)("figure",{className:"elements__element",children:[Object(a.jsx)("img",{className:"elements__element-pic",alt:"card image",onClick:function(){return o(t)},src:t&&t.link}),Object(a.jsx)("figcaption",{className:"elements__caption",children:t.name}),Object(a.jsxs)("div",{className:"elements__favorite-container",children:[Object(a.jsx)("button",{className:p,onClick:function(){return c(t)},type:"button","aria-label":"Like"}),Object(a.jsx)("p",{className:"elements__likes",children:t.likes.length})]}),Object(a.jsx)("button",{className:u,type:"button",onClick:function(){return n(t)},"aria-label":"Delete"})]})};var b=function(e){var t=e.cards,n=e.onEditAvatar,o=e.onEditProfile,c=e.onAddPlace,s=e.onCardDelete,i=e.onCardClick,u=e.onCardLike,l=Object(r.useContext)(d);return Object(a.jsxs)("main",{className:"content",children:[Object(a.jsxs)("section",{className:"profile",children:[Object(a.jsxs)("div",{className:"profile__avatar",children:[Object(a.jsx)("img",{className:"profile__image",src:l.avatar,alt:l.avatar}),Object(a.jsx)("button",{onClick:n,className:"profile__image-edit",type:"button","aria-label":"Edit Avatar"})]}),Object(a.jsxs)("div",{className:"profile__info",children:[Object(a.jsx)("h1",{className:"profile__info-title",children:l.name}),Object(a.jsx)("button",{className:"profile__edit-button",onClick:o,"aria-label":"Edit Profile"}),Object(a.jsx)("p",{className:"profile__info-subtitle",children:l.about})]}),Object(a.jsx)("button",{className:"profile__add-button",onClick:c,"aria-label":"Add"})]}),Object(a.jsx)("section",{className:"elements",children:Object(a.jsx)(a.Fragment,{children:t.map((function(e){return Object(a.jsx)(j,{card:e,onCardDelete:s,onCardClick:i,onCardLike:u},e._id)}))})})]})};var f=function(){return Object(a.jsx)("footer",{className:"footer",children:Object(a.jsx)("p",{className:"footer__info",children:"\xa9 2020 Around The U.S."})})};var h=function(e){var t=e.card,n=e.isOpen,r=e.onClose;return Object(a.jsx)("div",{className:"popup popup_type_image ".concat(n?"popup_open":""),onClick:r,children:Object(a.jsxs)("div",{className:"popup_container_type_image",children:[Object(a.jsx)("img",{alt:"Popup Image Picture",className:"popup__image",src:t&&t.link}),Object(a.jsx)("h3",{className:"popup__caption",children:t.name}),Object(a.jsx)("button",{className:"popup__close-button",onClick:r,type:"reset","aria-label":"Close Form"})]})})};var m=function(e){var t=e.name,n=e.onSubmit,r=e.onClose,o=e.isOpen,c=e.buttonText,s=e.children,i=e.title;return Object(a.jsx)("div",{className:"popup popup_".concat(t," ").concat(o?"popup_open":""),onClick:r,children:Object(a.jsx)("div",{className:"popup__container",children:Object(a.jsxs)("form",{action:"#",className:"popup__form ".concat(t,"-form"),onSubmit:n,noValidate:!0,children:[Object(a.jsx)("h2",{className:"popup__title",children:i}),s,Object(a.jsx)("button",{className:"popup__save",type:"submit","aria-label":"Save",children:c}),Object(a.jsx)("button",{className:"popup__close-button",onClick:r,type:"reset","aria-label":"Close Form"})]})})})};var _=function(e){var t=Object(r.useState)(" "),n=Object(u.a)(t,2),o=n[0],c=n[1],s=Object(r.useState)(" "),i=Object(u.a)(s,2),l=i[0],p=i[1],j=Object(r.useState)(" "),b=Object(u.a)(j,2),f=b[0],h=b[1],_=Object(r.useState)(" "),O=Object(u.a)(_,2),v=O[0],x=O[1],g=Object(r.useState)(" "),C=Object(u.a)(g,2),k=(C[0],C[1],Object(r.useContext)(d));return Object(r.useEffect)((function(){c(k.name),p(k.about)}),[k]),Object(a.jsxs)(m,{name:"type_edit",title:"Edit Profile",buttonText:"Save",isOpen:e.isOpen,onClose:e.onClose,onSubmit:function(t){t.preventDefault(),e.onUpdateUser({name:o,about:l})},children:[Object(a.jsx)("input",{id:"profile-name",type:"text",name:"name",value:o||"",className:"popup__input popup__input_type_name ".concat(f&&"popup__input_type_error"),onChange:function(e){c(e.target.value),h(e.target.validationMessage)},placeholder:"Jacques Cousteau",required:!0,maxLength:"40",minLength:"2"}),Object(a.jsx)("span",{id:"profile-name-error",className:"popup__error",children:f}),Object(a.jsx)("input",{id:"profile-text",type:"text",name:"about",className:"popup__input popup__input_type_job ".concat(v&&"popup__input_type_error"),value:l||"",onChange:function(e){p(e.target.value),x(e.target.validationMessage)},placeholder:"Explorer",required:!0,maxLength:"200",minLength:"2"}),Object(a.jsx)("span",{id:"profile-text-error",className:"popup__error",children:v})]})};var O=function(e){var t=e.isOpen,n=e.onClose,o=e.onUpdateAvatar,c=Object(r.useRef)();return Object(a.jsxs)(m,{name:"type_avatar",value:c||"",title:"Change Profile Picture",buttonText:"Save",isOpen:t,onClose:n,onUpdateAvatar:o,onSubmit:function(e){e.preventDefault(),o(c.current.value),c.current.value=""},children:[Object(a.jsx)("input",{id:"avatar-URL",type:"url",name:"avatarURL",className:"popup__input popup__input_type_avatar-URL",minLength:"2",ref:c}),Object(a.jsx)("span",{id:"avatar-URL-error",className:"popup__error"})]})};var v=function(e){var t=e.isOpen,n=e.onClose,r=e.onDeleteCard;return Object(a.jsx)(m,{name:"type_delete-card",title:"Are you sure?",buttonText:"Yes",isOpen:t,onClose:n,onDeleteCard:r,onSubmit:function(e){e.preventDefault(),r()}})};var x=function(e){var t=e.isOpen,n=e.onClose,o=e.onAddPlace,c=Object(r.useState)(""),s=Object(u.a)(c,2),i=s[0],l=s[1],p=Object(r.useState)(""),d=Object(u.a)(p,2),j=d[0],b=d[1];return Object(a.jsxs)(m,{name:"type_add-card",title:"New Place",buttonText:"Create",isOpen:t,onClose:n,onSubmit:function(e){e.preventDefault(),o({name:i,link:j}),b(""),l("")},children:[Object(a.jsx)("input",{id:"card-title",type:"text",name:"card-title",value:i,onChange:function(e){l(e.target.value)},className:"popup__input popup__input_type_title",placeholder:"Title",required:!0,maxLength:"30",minLength:"2"}),Object(a.jsx)("span",{id:"card-title-error",className:"popup__error"}),Object(a.jsx)("input",{id:"card-url",type:"url",name:"card-link",value:j,onChange:function(e){b(e.target.value)},className:"popup__input popup__input_type_link",placeholder:"Image Link",required:!0}),Object(a.jsx)("span",{id:"card-url-error",className:"popup__error"})]})};var g=n(7),C=n(8),k=new(function(){function e(t){var n=t.baseUrl,a=t.headers;Object(g.a)(this,e),this._baseUrl=n,this._headers=a}return Object(C.a)(e,[{key:"getInitialCards",value:function(){return fetch(this._baseUrl+"/cards/",{headers:this._headers}).then((function(e){return e.ok?e.json():Promise.reject("Error"+e.statusText)})).catch((function(e){return console.log(e)}))}},{key:"getUserInfo",value:function(){return fetch(this._baseUrl+"/users/me/",{headers:this._headers}).then((function(e){return e.ok?e.json():Promise.reject("Error"+e.statusText)})).catch((function(e){return console.log(e)}))}},{key:"getAppInfo",value:function(){return Promise.all([this.getUserInfo(),this.getInitialCards()])}},{key:"addCard",value:function(e){var t=e.name,n=e.link;return fetch(this._baseUrl+"/cards/",{headers:this._headers,method:"POST",body:JSON.stringify({name:t,link:n})}).then((function(e){return e.ok?e.json():Promise.reject("Error"+e.statusText)})).catch((function(e){return console.log(e)}))}},{key:"removeCard",value:function(e){return fetch(this._baseUrl+"/cards/"+e,{headers:this._headers,method:"DELETE"}).then((function(e){return e.ok?e.json():Promise.reject("Error"+e.statusText)})).catch((function(e){return console.log(e)}))}},{key:"addLike",value:function(e){return fetch(this._baseUrl+"/cards/likes/"+e,{headers:this._headers,method:"PUT"}).then((function(e){return e.ok?e.json():Promise.reject("Error"+e.statusText)})).catch((function(e){return console.log(e)}))}},{key:"removeLike",value:function(e){return fetch(this._baseUrl+"/cards/likes/"+e,{headers:this._headers,method:"DELETE"}).then((function(e){return e.ok?e.json():Promise.reject("Error"+e.statusText)})).catch((function(e){return console.log(e)}))}},{key:"setUserInfo",value:function(e){var t=e.name,n=e.about;return fetch(this._baseUrl+"/users/me/",{method:"PATCH",headers:{authorization:"a950b923-6d6c-4927-9948-6833c1950cc9","Content-Type":"application/json"},body:JSON.stringify({name:t,about:n})}).then((function(e){return e.ok?e.json():Promise.reject("Error"+e.statusText)})).catch((function(e){return console.log(e)}))}},{key:"setUserAvatar",value:function(e){return fetch(this._baseUrl+"/users/me/avatar/",{headers:this._headers,method:"PATCH",body:JSON.stringify({avatar:e})}).then((function(e){return e.ok?e.json():Promise.reject("Error"+e.statusText)})).catch((function(e){return console.log(e)}))}}]),e}())({baseUrl:"https://around.nomoreparties.co/v1/group-7",headers:{authorization:"a950b923-6d6c-4927-9948-6833c1950cc9","Content-Type":"application/json"}});var y=function(){var e=Object(r.useState)(!1),t=Object(u.a)(e,2),n=t[0],o=t[1],c=Object(r.useState)(!1),s=Object(u.a)(c,2),l=s[0],j=s[1],m=Object(r.useState)(!1),g=Object(u.a)(m,2),C=g[0],y=g[1],N=Object(r.useState)(!1),S=Object(u.a)(N,2),U=S[0],P=S[1],E=Object(r.useState)(!1),T=Object(u.a)(E,2),L=T[0],A=T[1],D=Object(r.useState)(""),I=Object(u.a)(D,2),F=I[0],J=I[1],q=Object(r.useState)(""),w=Object(u.a)(q,2),R=w[0],M=w[1],z=Object(r.useState)([]),B=Object(u.a)(z,2),H=B[0],V=B[1];function Y(){o(!1),j(!1),y(!1),P(!1),A(!1)}function G(e){e.target===e.currentTarget&&Y()}return Object(r.useEffect)((function(){k.getInitialCards().then((function(e){V(e)})).catch((function(e){return console.log(e)}))}),[]),Object(r.useEffect)((function(){k.getUserInfo().then((function(e){M(e)})).catch((function(e){return console.log(e)}))}),[]),Object(a.jsx)("div",{className:"body",children:Object(a.jsxs)(d.Provider,{value:R,children:[Object(a.jsx)(p,{}),Object(a.jsx)(b,{cards:H,onEditAvatar:function(){o(!0)},onEditProfile:function(){j(!0)},onAddPlace:function(){y(!0)},onCardDelete:function(e){P(!0),J(e)},onCardClick:function(e){J(e),A(!0)},onCardLike:function(e){(!1===e.likes.some((function(e){return e._id===R._id}))?k.addLike(e._id):k.removeLike(e._id)).then((function(t){var n=H.map((function(n){return n._id===e._id?t:n}));V(n)})).catch((function(e){return console.log(e)}))}}),Object(a.jsx)(f,{}),Object(a.jsx)(O,{isOpen:n,onClose:G,onUpdateAvatar:function(e){k.setUserAvatar(e).then((function(e){M(e)})).catch((function(e){return console.log(e)})).finally((function(){return Y()}))}}),Object(a.jsx)(_,{isOpen:l,onClose:G,onUpdateUser:function(e){var t=e.name,n=e.about;k.setUserInfo({name:t,about:n}).then((function(e){M(e)})).catch((function(e){return console.log(e)})).finally((function(){return Y()}))}}),Object(a.jsx)(x,{isOpen:C,onClose:G,onAddPlace:function(e){var t=e.name,n=e.link;k.addCard({name:t,link:n}).then((function(e){V([e].concat(Object(i.a)(H)))})).catch((function(e){return console.log(e)})).finally((function(){return Y()}))}}),Object(a.jsx)(v,{isOpen:U,onClose:G,onDeleteCard:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F;k.removeCard(e._id).then((function(){var t=H.filter((function(t){return t._id!==e._id}));V(t)})).catch((function(e){return console.log(e)})).finally((function(){return Y()}))}}),Object(a.jsx)(h,{card:F,isOpen:L,onClose:Y})]})})},N=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,17)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,o=t.getLCP,c=t.getTTFB;n(e),a(e),r(e),o(e),c(e)}))};s.a.render(Object(a.jsx)(o.a.StrictMode,{children:Object(a.jsx)(y,{})}),document.getElementById("root")),N()}},[[16,1,2]]]);
//# sourceMappingURL=main.487f07b2.chunk.js.map